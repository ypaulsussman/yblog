---
title: GoRails
date: "2019-05-28"
template: "post"
draft: true
slug: "/posts/gorails-notes/"
category: "What I Read"
tags:
  - "Ruby"
  - "Rails"
description: "Notes from GoRails videos."
---

## Episode 1. Environment Variables

`$PATH` is just a list of the directory paths that the shell will traverse in order to find the executable file you've specified in the current command (_throwing an error if no such executable can be found via any of the paths._) 

The `$` is only used to access an environmental variable from the terminal; in Ruby or other applications, we don't use it.

Inside `irb`, you access the hash of all environmental variable at `ENV` (or `ENV["FOOBAR"]` to access the `FOOBAR` variable.)

You use e.g. `export FOOBAR=bazquux` to set a variable for the entirety of the session (_but not across shells/sessions._)

To set a variable for all sessions, add it to `.bash_profile` or `.bashrc`.

`nvm`, `rvm`, `rbenv`, etc all work by hooking into the `$PATH` variable, then dynamically manipulating it based on whatever version's been specified from the command line. 

## Episode 2. Ruby Version Managers

`rvm` = very full-featured, but also beginner-friendly; `rbenv` is more lightweight.

`rvm` actually patches the `cd` command; `rbenv` really just adds itself to your `$PATH` and that's it.

`rvm` also provided access to gemsets (now obviated by introduction of `bundler`.)
   
## Episode 3. Rails Application Structure 

`config.ru` 
    * example of '_rack up file_' => starts the web server; gets passed into [Unicorn, Puma, Passenger], which then hands incoming requests off to the application code   
    * as such, you _could_ actually change it to e.g. `run Sinatra.application`, since Sinatra's based on Rack as well
    * but it does this only after it loads... 

`config/environment.rb` file, which
    * initializes the application 
        * Files in the `/initializers` dir aren't often modified 
        * however, adding certain gems (e.g. `devise`) will require you to add new files here
        * these files are called from within `config/environment.rb`, after it loads `config/application.rb` 
    * but, again, only after it loads...

`config/application.rb` 
    * loads `boot.rb` (_which ensures dependencies are in order: loads gemfile, runs bundler_), 
    * requires the actual `rails`-gem files, then
    * requires any gems specific to the current group (`:test`, `:development`, `:production`)
    * includes a `module` of `class Application` that allows you to set global config items (default language, timezone, etc)

The `/locales` directory is the location for basic internationalization strings.

`routes.rb` is... well, where you declare your routes.

`secrets.yml` was introduced in Rails 4; it lets you set keys that are hardcoded in the `:test`/`:development` environments, but call on environmental variables for `:production`

The `bin` dir contains binstubs for common executables (bundle, rails, rake, spring) 
    * ["Binstubs are wrapper scripts around executables"](https://github.com/rbenv/rbenv/wiki/Understanding-binstubs)
    * They prepare the environment before dispatching the call to the executable
    * In the Ruby world, the most common binstubs are the ones that RubyGems generates after installing a gem that contains executables.
    * One common modification here is adding `pry` within the `rails` binstub

The `log` dir stores the logfiles generated by the server as it runs.

Files in the `public` dir _don't_ get compiled through the asset pipeline; they're served up directly.
 
## Episode 4. The Params Hash 

'params hash' = the `params` reserved variable inside `Controller`-class objects

Collection of data that has come to your application from various places:
    * query parameters
        * k:v pairs following `?` in URL
        * k:v separated by `=`
        * pairs delimited by `&`
    * route parameters
        * inside `routes.rb`, signified by `:` prefix
        * e.g. `'/blog/:id'` will assign whatever's entered into the route after `/blog/` as the value of the key `id`
        * benefit of route params: lets search engine know that you're on another page (it won't recognize this from different query params)
    * form data
        * `utf8` and `authenticity_token` keys are automatically provided by rails to `form_tag` helpers; the latter [protects against CSRF](https://guides.rubyonrails.org/form_helpers.html#forms-to-external-resources)
        * You'll often also see a `commit` key, the value of which is the text on whichever `type="submit"` button was clicked

## Episode 5. Sending Data Between Controllers And Views

Within a controller method, we set instance (rather than local) variables so that views can pick them up: which occurs after the method is done being called.

Instance variables exist as long as the instance of that `FooController` class (_the instance generated for that particular HTTP request_) exists.
    * that is, first the controller is instanced, and the particular action is called based on the instructions from the `routes.rb`:
        * `my_fc_instance = FooController.new`
        * `my_fc_instance.send(:myaction)`
    * thus, when ERB is called as e.g. `ERB.render('myaction.html.erb,' my_fc_instance.instance_variables)`, the variables are still present.  

A local variable, by contrast, is deleted as soon as the controller action is done executing.


## Episode 6. #{???}
 
https://gorails.com/episodes/named-scopes-with-activerecord-merge?autoplay=1
